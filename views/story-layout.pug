extends layout.pug

block content
    link(rel="stylesheet" type="text/css" href="/styles/story.css")
    script(defer type="module" src="/js/story.js")
    article(class="story-container")
      h1(class="story-title")= storyInfo.title
      .story-author-info-top
        img(class="md-icon top-author-img" src="/icons/avatar (1).svg" alt=`Author ${ storyInfo.authorInfo.authorFN } ${ storyInfo.authorInfo.authorLN }`)
        span(class="top-author-name") #{ storyInfo.authorInfo.authorFN } #{ storyInfo.authorInfo.authorLN }
        span(class="top-story-date")= storyInfo.createdAt
        button(class="follow-button top-author-follow btn-primary" data-author=storyInfo.authorInfo.authorId) Follow

      img(class="bkmrk bookmark-top md-icon" src="/icons/bookmark.svg")

      img(class="story-image" src="/icons/happyGrizzly.jpg" alt="Story Image")

      .story-body= storyInfo.body

      hr


      div(class="author-below-body")
        img(class="author-below-item md-icon" src="/icons/avatar (1).svg" alt=`Author ${ storyInfo.authorInfo.authorFN } ${ storyInfo.authorInfo.authorLN }`)
        p(class="author-below-item auth-name") #{ storyInfo.authorInfo.authorFN } #{ storyInfo.authorInfo.authorLN }
        button(class="author-below-item follow-button btn-primary" data-author=storyInfo.authorInfo.authorId) Follow

    div(class="story-options")
      a(href="/follow")
        span #{ storyInfo.authorInfo.authorFN } #{ storyInfo.authorInfo.authorLN }
        button(class="follow-button btn-primary" data-author=storyInfo.authorInfo.authorId) Follow
      hr
      a(href="/like")
        img(class="sm-icon" src="/icons/heart.svg")
        span= storyInfo.likeCount
      a(href="/comment")
        img(class="sm-icon" src="/icons/chat.svg")
        span= storyInfo.commentCount
      img(class="bkmrk sm-icon" src="/icons/bookmark.svg")

    div(class="below-body-options")
      a(href="/like")
        img(class="sm-icon" src="/icons/heart.svg")
        span= storyInfo.likeCount
      a(href="/comment")
        img(class="sm-icon" src="/icons/chat.svg")
        span= storyInfo.commentCount

    .comments-bar
      section
        h2 Comments (#{ storyInfo.commentsCount })
        form(method="post" action="/comments" id="commentForm" data-story=storyInfo.storyId)
          label(for="comment") Add a Comment:
          textarea(id="comment" name="comment")
          button(type="submit" id="submitComment") Submit Comment
        ul(id="commentList")
          if storyInfo.commentsCount > 0
            each comment in storyInfo.comments
              li(class="full-comment" data-commentid=comment.id data-user=comment.userId)
                ul(class="comment-ul")
                  li(class="commenting-user")
                    img(class="sm-icon" src="/icons/avatar (1).svg")
                    span #{ comment.firstName } #{ comment.lastName }
                  li(class="comment-body")= comment.body
                  li(class="comment-time")= comment.created
                  li(class="my-comment-options" data-user=comment.userId)
                    button(class="editBtn") Edit
                    button(class="dltBtn") Delete
